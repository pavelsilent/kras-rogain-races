<ng-container *ngIf="race$ | async as race">
  <div style="display:flex; justify-content: space-between; align-items:center; margin-bottom: 16px;">
    <h2>{{ race?.name }}</h2>
    <button mat-flat-button color="primary">{{ race.state?.name }}</button>
  </div>
  <p><strong>Тип:</strong> {{ race?.type?.name }}</p>
  <p><strong>Описание:</strong> {{ race?.description }}</p>
  <p><strong>Дата:</strong> {{ race?.date | toRusDate }}</p>
  <div style="display:flex; justify-content: space-between; align-items:center; margin-bottom: 16px;">
    <strong>Форматы:</strong>
    <button mat-flat-button color="primary" (click)="onAddRaceFormat()">Добавить формат</button>
  </div>

  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="raceFormatsDataSource" matSort class="full-width-table">

      <!-- Название -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Название</th>
        <td mat-cell *matCellDef="let format">
          <a [routerLink]="['/races', raceId, 'formats', format.id]">{{ format.name }}</a>
        </td>
      </ng-container>

      <!-- Тип участия -->
      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Тип участия</th>
        <td mat-cell *matCellDef="let format"> {{ format.type | toEnumName }}</td>
      </ng-container>

      <!-- Дата старта -->
      <ng-container matColumnDef="startDateTime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Дата начала</th>
        <td mat-cell *matCellDef="let format"> {{ format.startDateTime | toRusDateTime }}</td>
      </ng-container>

      <!-- Дата финиша -->
      <ng-container matColumnDef="finishDateTime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Дата завершения</th>
        <td mat-cell *matCellDef="let format"> {{ format.finishDateTime | toRusDateTime }}</td>
      </ng-container>

      <!-- Название -->
      <ng-container matColumnDef="state">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Состояние</th>
        <td mat-cell *matCellDef="let format"> {{ format.state.name }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

</ng-container>
